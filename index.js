var _0xfb99=["\x63\x6F\x6E\x66\x69\x67","\x64\x6F\x74\x65\x6E\x76","\x6D\x6F\x6D\x65\x6E\x74","\x6D\x6F\x6E\x67\x6F\x6F\x73\x65","\x6D\x73\x73\x71\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x72\x61\x77\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x63\x61\x6C\x63\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x65\x6E\x76","\x63\x6F\x6E\x6E\x65\x63\x74","\x75\x73\x65\x46\x69\x6E\x64\x41\x6E\x64\x4D\x6F\x64\x69\x66\x79","\x73\x65\x74","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x44\x41\x54\x41\x42\x41\x53\x45","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x55\x53\x45\x52\x4E\x41\x4D\x45","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x53\x45\x52\x56\x45\x52","\x46\x4C\x45\x58\x59\x5F\x4E\x61\x6D\x65\x73\x70\x61\x63\x65","\x76\x61\x6C\x75\x65","\x64\x61\x74\x61","\x74\x69\x65\x72\x31","\x74\x69\x65\x72\x32","\x73\x69\x74\x65\x5F\x69\x64","\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65","\x73\x74\x72\x69\x6E\x67\x69\x66\x79","\x45\x72\x72\x6F\x72\x20\x73\x61\x76\x65\x20\x64\x61\x74\x61\x20\x74\x6F\x20\x4C\x6F\x63\x61\x6C\x20\x64\x61\x74\x61","\x6C\x6F\x67","\x69\x6E\x73\x65\x72\x74\x4D\x61\x6E\x79","\x6D\x69\x6E\x75\x74\x65\x73","\x73\x75\x62\x74\x72\x61\x63\x74","\x66\x69\x6E\x64","\x63\x6F\x75\x6E\x74\x44\x6F\x63\x75\x6D\x65\x6E\x74\x73","\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E","\x66\x6F\x72\x45\x61\x63\x68","\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74","\x61\x76\x72\x46\x6C\x6F\x77","\x61\x76\x72\x5F\x66\x6C\x6F\x77","\x64\x61\x79\x73","\x64\x65\x6C\x65\x74\x65\x4D\x61\x6E\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20","\x54\x6F\x74\x61\x6C\x20\x72\x65\x63\x6F\x72\x64\x20\x64\x65\x6C\x65\x74\x65\x64\x20\x3D\x20","\x64\x65\x6C\x65\x74\x65\x64\x43\x6F\x75\x6E\x74","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x31","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x32","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x33","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x34","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x35","\x66\x6F\x72\x6D\x61\x74","\x6C\x6F\x63\x61\x6C","\x70\x75\x73\x68","\x69\x70","\x70\x6F\x72\x74","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x55\x53\x45\x52\x4E\x41\x4D\x45","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x6C\x69\x6D\x69\x74","\x73\x6F\x72\x74","\x66\x69\x6E\x64\x4F\x6E\x65","\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A","\x46\x69\x72\x73\x74\x20\x69\x6E\x69\x74\x69\x61\x6C\x20","\x6E\x6F\x64\x65\x2D\x6F\x70\x63\x75\x61","\x61\x73\x79\x6E\x63","\x6F\x70\x63\x2E\x74\x63\x70\x3A\x2F\x2F","\x3A","\x43\x61\x6E\x6E\x6F\x74\x20\x63\x6F\x6E\x6E\x65\x63\x74\x20\x74\x6F\x20\x65\x6E\x64\x70\x6F\x69\x6E\x74\x3A\x20","\x43\x6F\x6E\x6E\x65\x63\x74\x65\x64\x20\x74\x6F\x20\x46\x6C\x65\x78\x79\x21","\x74\x69\x6D\x65\x64\x5F\x6F\x75\x74\x5F\x72\x65\x71\x75\x65\x73\x74","\x74\x69\x6D\x65\x64\x5F\x6F\x75\x74\x5F\x72\x65\x71\x75\x65\x73\x74\x20","\x6F\x6E","\x73\x74\x61\x72\x74\x5F\x72\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E","\x53\x74\x61\x72\x74\x5F\x72\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x20\x6E\x6F\x74\x20\x77\x6F\x72\x6B\x69\x6E\x67\x20\x73\x6F\x20\x61\x62\x6F\x72\x74\x69\x6E\x67","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x70\x61\x73\x73\x77\x6F\x72\x64","\x63\x72\x65\x61\x74\x65\x53\x65\x73\x73\x69\x6F\x6E","\x74\x65\x72\x6D\x69\x6E\x61\x74\x65\x64","\x6B\x65\x65\x70\x61\x6C\x69\x76\x65","\x73\x74\x61\x72\x74\x65\x64","\x6E\x73\x3D","\x3B\x73\x3D","\x6E\x61\x6D\x65","\x72\x65\x73\x6F\x6C\x76\x65\x4E\x6F\x64\x65\x49\x64","\x6D\x6F\x6E\x69\x74\x6F\x72","\x63\x68\x61\x6E\x67\x65\x64","\x22\x54\x61\x67\x4E\x61\x6D\x65\x22","\x22","\x2C","\x22\x56\x61\x6C\x75\x65\x22","\x66\x69\x6E\x64\x49\x6E\x64\x65\x78","\x74\x6F\x46\x69\x78\x65\x64","\x74\x69\x6D\x65","\x43\x6C\x6F\x73\x69\x6E\x67\x20\x73\x65\x73\x73\x69\x6F\x6E","\x53\x65\x73\x73\x69\x6F\x6E\x20\x63\x6C\x6F\x73\x65\x64","\x63\x6C\x6F\x73\x65","\x46\x61\x69\x6C\x75\x72\x65\x20","\x64\x6F\x6E\x65\x21","\x43\x6C\x69\x65\x6E\x74\x20\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74\x65\x64","\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74","\x73\x65\x72\x69\x65\x73","\x69\x6E\x70\x75\x74","\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65","\x70\x72\x65\x73\x73\x75\x72\x65","\x66\x6C\x6F\x77","\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x20\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x66\x6C\x6F\x77\x2C\x20\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C","\x20\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x29\x20\x56\x41\x4C\x55\x45\x53\x20","\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x40\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x40\x66\x6C\x6F\x77\x2C\x20\x40\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C\x20\x40\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x29","\x71\x75\x65\x72\x79","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x61\x76\x72\x66\x6C\x6F\x77\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x61\x76\x72\x46\x6C\x6F\x77\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20\x31\x30\x20\x64\x61\x79\x73","\x65\x72\x72\x6F\x72","\x53\x51\x4C\x20\x68\x61\x73\x20\x69\x73\x73\x75\x65\x20"];require(_0xfb99[1])[_0xfb99[0]]();var moment=require(_0xfb99[2]);var mongoose=require(_0xfb99[3]);var sql=require(_0xfb99[4]);var RawData=require(_0xfb99[5]);var CalcData=require(_0xfb99[6]);mongoose[_0xfb99[8]](process[_0xfb99[7]].MONGO_URL,{useNewUrlParser:true,useUnifiedTopology:true});mongoose[_0xfb99[10]](_0xfb99[9],false);const sqlConfig={password:process[_0xfb99[7]][_0xfb99[11]],database:process[_0xfb99[7]][_0xfb99[12]],stream:false,options:{enableArithAbort:true,encrypt:true},port:parseInt(process[_0xfb99[7]].SQL_SERVER_PORT),user:process[_0xfb99[7]][_0xfb99[13]],server:process[_0xfb99[7]][_0xfb99[14]]};let TIER_2_BENCHMARK=parseFloat(process[_0xfb99[7]].TIER_2_BENCHMARK);let TIME_INTERVAL_GETDATA=parseInt(process[_0xfb99[7]].TIME_INTERVAL_GETDATA)* 1000;let TIME_INTERVAL_CALCDATA=parseInt(process[_0xfb99[7]].TIME_INTERVAL_CALCDATA)* 1000;let TIME_INTERVAL_REMOVE_DATA=parseInt(process[_0xfb99[7]].TIME_INTERVAL_REMOVE_DATA)* 86400000;let flexy_ns=process[_0xfb99[7]][_0xfb99[15]];var opc_server=[];var opc_server_avr=[];async function run(){ await readFirstConfig(); await readOPCUA(); await setTimeout(function(){},4000); await setInterval(async function(){let _0xa64fxf=opc_server[0][_0xfb99[17]][3][_0xfb99[16]];let _0xa64fx10=opc_server[0][_0xfb99[18]];let _0xa64fx11=opc_server[0][_0xfb99[19]];let _0xa64fx12,_0xa64fx13;if(_0xa64fxf> TIER_2_BENCHMARK){_0xa64fx12= TIER_2_BENCHMARK/ 60+ _0xa64fx10;_0xa64fx13= (_0xa64fxf- TIER_2_BENCHMARK)/ 60+ _0xa64fx11}else {_0xa64fx12= _0xa64fxf/ 60+ _0xa64fx10;_0xa64fx13= 0+ _0xa64fx11};opc_server[0][_0xfb99[18]]= _0xa64fx12;opc_server[0][_0xfb99[19]]= _0xa64fx13;insert_data(opc_server[0][_0xfb99[20]],opc_server[0][_0xfb99[21]],opc_server[0][_0xfb99[17]][0][_0xfb99[16]],opc_server[0][_0xfb99[17]][2][_0xfb99[16]],opc_server[0][_0xfb99[17]][1][_0xfb99[16]],opc_server[0][_0xfb99[17]][3][_0xfb99[16]],JSON[_0xfb99[22]](opc_server[0][_0xfb99[17]]),_0xa64fx12,_0xa64fx13);saveConnectionStatusToDatabase(opc_server[0][_0xfb99[20]],opc_server[0][_0xfb99[21]],opc_server[0][_0xfb99[17]][4][_0xfb99[16]]);let _0xa64fx14={site_id:opc_server[0][_0xfb99[20]],site_name:opc_server[0][_0xfb99[21]],information:opc_server[0][_0xfb99[17]],tier1:opc_server[0][_0xfb99[18]],tier2:opc_server[0][_0xfb99[19]],created_at: new Date()}; await RawData[_0xfb99[25]](_0xa64fx14,function(_0xa64fx15,_0xa64fx16){if(_0xa64fx15){console[_0xfb99[24]](_0xfb99[23])};opc_server[0][_0xfb99[17]][4][_0xfb99[16]]= 0})},TIME_INTERVAL_GETDATA); await setInterval(async function(){let _0xa64fx17=moment()[_0xfb99[27]](15,_0xfb99[26]);let _0xa64fx18=moment();let _0xa64fx19={created_at:{$gte:_0xa64fx17,$lte:_0xa64fx18},tier1:{$gt:0}};let _0xa64fx1a= await RawData[_0xfb99[28]](_0xa64fx19);let _0xa64fx1b= await RawData[_0xfb99[29]](_0xa64fx19);let _0xa64fx1c=0;_0xa64fx1a[_0xfb99[31]](function(_0xa64fx1d){_0xa64fx1c= _0xa64fx1c+ parseFloat(_0xa64fx1d[_0xfb99[30]][3][_0xfb99[16]])});let _0xa64fx1e=0;if(_0xa64fx1b> 0){_0xa64fx1e= _0xa64fx1c/ _0xa64fx1b};let _0xa64fx1f=opc_server_avr[_0xfb99[18]];let _0xa64fx20=opc_server_avr[_0xfb99[19]];let _0xa64fx21,_0xa64fx22;if(_0xa64fx1e> TIER_2_BENCHMARK){_0xa64fx21= TIER_2_BENCHMARK/ 60+ _0xa64fx1f;_0xa64fx22= (_0xa64fx1e- TIER_2_BENCHMARK)/ 60+ _0xa64fx20}else {_0xa64fx21= _0xa64fx1e/ 60+ _0xa64fx1f;_0xa64fx22= 0+ _0xa64fx20};opc_server_avr[_0xfb99[18]]= _0xa64fx21;opc_server_avr[_0xfb99[19]]= _0xa64fx22;opc_server_avr[_0xfb99[32]]=  new Date();opc_server_avr[_0xfb99[33]]= _0xa64fx1e;let _0xa64fx23=opc_server_avr;_0xa64fx23[_0xfb99[34]]= opc_server_avr[_0xfb99[33]];CalcData[_0xfb99[25]](_0xa64fx23,function(_0xa64fx15,_0xa64fx16){if(_0xa64fx15){console[_0xfb99[24]](_0xfb99[23])}});saveAvrDataToDatabase(opc_server[0][_0xfb99[20]],opc_server[0][_0xfb99[21]],opc_server_avr[_0xfb99[33]],opc_server_avr[_0xfb99[18]],opc_server_avr[_0xfb99[19]])},TIME_INTERVAL_CALCDATA); await setInterval(async function(){let _0xa64fx24=moment()[_0xfb99[27]](10,_0xfb99[35]);const _0xa64fx25= await RawData[_0xfb99[36]]({created_at:{$lte:_0xa64fx24}});console[_0xfb99[24]](_0xfb99[37],_0xa64fx24,_0xfb99[38],_0xa64fx25[_0xfb99[39]]);deleteDataAfter10days()},TIME_INTERVAL_REMOVE_DATA)}run();async function readFirstConfig(){let _0xa64fx27=[];let _0xa64fx28=[process[_0xfb99[7]][_0xfb99[40]],process[_0xfb99[7]][_0xfb99[41]],process[_0xfb99[7]][_0xfb99[42]],process[_0xfb99[7]][_0xfb99[43]],process[_0xfb99[7]][_0xfb99[44]]];for(const _0xa64fx29 of _0xa64fx28){_0xa64fx27[_0xfb99[47]]({name:_0xa64fx29,value:0,time:moment()[_0xfb99[46]]()[_0xfb99[45]]()})};let _0xa64fx2a={id:1,site_id:process[_0xfb99[7]][_0xfb99[20]],site_name:process[_0xfb99[7]][_0xfb99[21]],ip:process[_0xfb99[7]][_0xfb99[48]],port:parseInt(process[_0xfb99[7]][_0xfb99[49]]),username:process[_0xfb99[7]][_0xfb99[50]],password:process[_0xfb99[7]][_0xfb99[51]],data:_0xa64fx27,tier1:0,tier2:0};opc_server_avr= {avrFlow:0,tier1:0,tier2:0};let _0xa64fx2b= await RawData[_0xfb99[54]]()[_0xfb99[53]]({_id:-1})[_0xfb99[52]](1);if(_0xa64fx2b){_0xa64fx2a[_0xfb99[18]]= _0xa64fx2b[_0xfb99[18]];_0xa64fx2a[_0xfb99[19]]= _0xa64fx2b[_0xfb99[19]]}else {_0xa64fx2a[_0xfb99[18]]= parseFloat(process[_0xfb99[7]].START_TIER_1);_0xa64fx2a[_0xfb99[19]]= parseFloat(process[_0xfb99[7]].START_TIER_2)};let _0xa64fx2c= await CalcData[_0xfb99[54]]()[_0xfb99[53]]({_id:-1})[_0xfb99[52]](1);if(_0xa64fx2c){opc_server_avr[_0xfb99[18]]= _0xa64fx2c[_0xfb99[18]];opc_server_avr[_0xfb99[19]]= _0xa64fx2c[_0xfb99[19]]}else {opc_server_avr[_0xfb99[18]]= parseFloat(process[_0xfb99[7]].START_AVR_TIER_1);opc_server_avr[_0xfb99[19]]= parseFloat(process[_0xfb99[7]].START_AVR_TIER_2)};opc_server[_0xfb99[47]](_0xa64fx2a);console[_0xfb99[24]](_0xfb99[55]);console[_0xfb99[24]](_0xfb99[56],opc_server,opc_server_avr);return}async function readOPCUA(){var _0xa64fx2e=require(_0xfb99[57]),_0xa64fx2f=require(_0xfb99[58]),_0xa64fx30= new _0xa64fx2e.OPCUAClient(),_0xa64fx31= new Array(),_0xa64fx32=0,_0xa64fx33= new Array(),_0xa64fx34=null;const _0xa64fx35=_0xfb99[59]+ opc_server[0][_0xfb99[48]]+ _0xfb99[60]+ opc_server[0][_0xfb99[49]];_0xa64fx2f[_0xfb99[94]]([function(_0xa64fx36){_0xa64fx30[_0xfb99[8]](_0xa64fx35,function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xfb99[61],_0xa64fx35)}else {console[_0xfb99[24]](_0xfb99[62])};_0xa64fx36(_0xa64fx37)});_0xa64fx30[_0xfb99[65]](_0xfb99[63],function(){console[_0xfb99[24]](_0xfb99[64])});_0xa64fx30[_0xfb99[65]](_0xfb99[66],function(){console[_0xfb99[24]](_0xfb99[67])})},function(_0xa64fx36){_0xa64fx30[_0xfb99[70]]({userName:opc_server[0][_0xfb99[68]],password:opc_server[0][_0xfb99[69]]},function(_0xa64fx37,_0xa64fx38){if(!_0xa64fx37){_0xa64fx34= _0xa64fx38};_0xa64fx36(_0xa64fx37)})},function(_0xa64fx36){the_subscription=  new _0xa64fx2e.ClientSubscription(_0xa64fx34,{requestedPublishingInterval:1000,requestedLifetimeCount:10,requestedMaxKeepAliveCount:2,maxNotificationsPerPublish:10,publishingEnabled:true,priority:10});the_subscription[_0xfb99[65]](_0xfb99[73],function(){})[_0xfb99[65]](_0xfb99[72],function(){opc_server[0][_0xfb99[17]][4][_0xfb99[16]]= 1})[_0xfb99[65]](_0xfb99[71],function(){opc_server[0][_0xfb99[17]][4][_0xfb99[16]]= 0;_0xa64fx36()});opc_server[0][_0xfb99[17]][_0xfb99[31]](function(_0xa64fx39){var _0xa64fx3a=_0xfb99[74]+ flexy_ns+ _0xfb99[75]+ _0xa64fx39[_0xfb99[76]];_0xa64fx33[_0xa64fx32]= the_subscription[_0xfb99[78]]({nodeId:_0xa64fx2e[_0xfb99[77]](_0xa64fx3a),attributeId:13},{samplingInterval:200,discardOldest:true,queueSize:10});_0xa64fx33[_0xa64fx32][_0xfb99[65]](_0xfb99[79],function(_0xa64fx3b){mesage= _0xfb99[80]+ _0xfb99[60]+ _0xfb99[81]+ _0xa64fx39+ _0xfb99[81]+ _0xfb99[82]+ _0xfb99[83]+ _0xfb99[60]+ _0xa64fx3b[_0xfb99[16]][_0xfb99[16]];var _0xa64fx3c=opc_server[0][_0xfb99[17]][_0xfb99[84]](function(_0xa64fx3d,_0xa64fx3e){return _0xa64fx3d[_0xfb99[76]]=== _0xa64fx39[_0xfb99[76]]});opc_server[0][_0xfb99[17]][_0xa64fx3c][_0xfb99[16]]= parseFloat(_0xa64fx3b[_0xfb99[16]][_0xfb99[16]][_0xfb99[85]](2));opc_server[0][_0xfb99[17]][_0xa64fx3c][_0xfb99[86]]=  new Date()});_0xa64fx32= _0xa64fx32+ 1})},function(_0xa64fx36){console[_0xfb99[24]](_0xfb99[87]);_0xa64fx34[_0xfb99[89]](function(_0xa64fx37){console[_0xfb99[24]](_0xfb99[88]);_0xa64fx36()})}],function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xfb99[90],_0xa64fx37)}else {console[_0xfb99[24]](_0xfb99[91])};opc_server[0][_0xfb99[17]][4][_0xfb99[16]]= 0;_0xa64fx30[_0xfb99[93]](function(){opc_server[0][_0xfb99[17]][4][_0xfb99[16]]= 0;console[_0xfb99[24]](_0xfb99[92])})})}function insert_data(_0xa64fx40,_0xa64fx41,_0xa64fx42,_0xa64fx43,_0xa64fx44,_0xa64fx45,_0xa64fx46,_0xa64fx12,_0xa64fx13){sql[_0xfb99[8]](sqlConfig,function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}else {var _0xa64fx47= new sql.Request();_0xa64fx47[_0xfb99[95]](_0xfb99[20],sql.VarChar,_0xa64fx40);_0xa64fx47[_0xfb99[95]](_0xfb99[21],sql.VarChar,_0xa64fx41);_0xa64fx47[_0xfb99[95]](_0xfb99[30],sql.VarChar,_0xa64fx46);_0xa64fx47[_0xfb99[95]](_0xfb99[32],sql.DateTimeOffset, new Date());_0xa64fx47[_0xfb99[95]](_0xfb99[96],sql.Decimal(10,2),parseFloat(_0xa64fx42+ 0.0));_0xa64fx47[_0xfb99[95]](_0xfb99[97],sql.Decimal(10,2),parseFloat(_0xa64fx43+ 0.0));_0xa64fx47[_0xfb99[95]](_0xfb99[98],sql.Decimal(10,2),parseFloat(_0xa64fx44+ 0.0));_0xa64fx47[_0xfb99[95]](_0xfb99[99],sql.Decimal(10,2),parseFloat(_0xa64fx45+ 0.0));_0xa64fx47[_0xfb99[95]](_0xfb99[18],sql.Decimal(10,2),parseFloat(_0xa64fx12));_0xa64fx47[_0xfb99[95]](_0xfb99[19],sql.Decimal(10,2),parseFloat(_0xa64fx13));let _0xa64fx48=_0xfb99[100]+ _0xfb99[101]+ _0xfb99[102];_0xa64fx47[_0xfb99[103]](_0xa64fx48,function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}})}})}function saveAvrDataToDatabase(_0xa64fx40,_0xa64fx41,_0xa64fx4b,_0xa64fx12,_0xa64fx13){sql[_0xfb99[8]](sqlConfig,function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}else {var _0xa64fx47= new sql.Request();_0xa64fx47[_0xfb99[95]](_0xfb99[20],sql.VarChar,_0xa64fx40);_0xa64fx47[_0xfb99[95]](_0xfb99[21],sql.VarChar,_0xa64fx41);_0xa64fx47[_0xfb99[95]](_0xfb99[33],sql.Decimal(10,2),parseFloat(_0xa64fx4b));_0xa64fx47[_0xfb99[95]](_0xfb99[18],sql.Decimal(10,2),parseFloat(_0xa64fx12));_0xa64fx47[_0xfb99[95]](_0xfb99[19],sql.Decimal(10,2),parseFloat(_0xa64fx13));_0xa64fx47[_0xfb99[95]](_0xfb99[32],sql.DateTimeOffset, new Date());_0xa64fx47[_0xfb99[103]](_0xfb99[104],function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}})}})}function saveConnectionStatusToDatabase(_0xa64fx40,_0xa64fx41,_0xa64fx4d){sql[_0xfb99[8]](sqlConfig,function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}else {var _0xa64fx47= new sql.Request();_0xa64fx47[_0xfb99[95]](_0xfb99[20],sql.VarChar,_0xa64fx40);_0xa64fx47[_0xfb99[95]](_0xfb99[21],sql.VarChar,_0xa64fx41);_0xa64fx47[_0xfb99[95]](_0xfb99[105],sql.Bit,_0xa64fx4d);_0xa64fx47[_0xfb99[95]](_0xfb99[32],sql.DateTimeOffset, new Date());_0xa64fx47[_0xfb99[103]](_0xfb99[106],function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}})}})}function deleteDataAfter10days(){sql[_0xfb99[8]](sqlConfig,function(_0xa64fx37){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}else {var _0xa64fx47= new sql.Request();let _0xa64fx24=moment()[_0xfb99[27]](10,_0xfb99[35]);let _0xa64fx4f= new Date(_0xa64fx24);_0xa64fx47[_0xfb99[95]](_0xfb99[107],sql.DateTimeOffset,_0xa64fx4f);_0xa64fx47[_0xfb99[103]](_0xfb99[108],function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}});_0xa64fx47[_0xfb99[103]](_0xfb99[109],function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)}});_0xa64fx47[_0xfb99[103]](_0xfb99[110],function(_0xa64fx37,_0xa64fx49){if(_0xa64fx37){console[_0xfb99[24]](_0xa64fx37)};console[_0xfb99[24]](_0xfb99[111])})}});sql[_0xfb99[65]](_0xfb99[112],(_0xa64fx37)=>{console[_0xfb99[24]](_0xfb99[113],_0xa64fx37)})}