var _0x8d70=["\x63\x6F\x6E\x66\x69\x67","\x64\x6F\x74\x65\x6E\x76","\x6D\x6F\x6D\x65\x6E\x74","\x6D\x6F\x6E\x67\x6F\x6F\x73\x65","\x6D\x73\x73\x71\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x72\x61\x77\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x63\x61\x6C\x63\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x65\x6E\x76","\x63\x6F\x6E\x6E\x65\x63\x74","\x75\x73\x65\x46\x69\x6E\x64\x41\x6E\x64\x4D\x6F\x64\x69\x66\x79","\x73\x65\x74","\x2E\x2F\x63\x6F\x6E\x66\x69\x67\x2F\x73\x71\x6C\x2E\x6A\x73","\x6E\x6F\x64\x65\x2D\x6F\x70\x63\x75\x61\x2D\x63\x6C\x69\x65\x6E\x74","\x46\x4C\x45\x58\x59\x5F\x4E\x61\x6D\x65\x73\x70\x61\x63\x65","\x76\x61\x6C\x75\x65","\x64\x61\x74\x61","\x74\x69\x65\x72\x31","\x74\x69\x65\x72\x32","\x73\x69\x74\x65\x5F\x69\x64","\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65","\x73\x74\x72\x69\x6E\x67\x69\x66\x79","\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74","\x45\x72\x72\x6F\x72\x20\x73\x61\x76\x65\x20\x64\x61\x74\x61\x20\x74\x6F\x20\x4C\x6F\x63\x61\x6C\x20\x64\x61\x74\x61","\x6C\x6F\x67","\x69\x6E\x73\x65\x72\x74\x4D\x61\x6E\x79","\x6D\x69\x6E\x75\x74\x65\x73","\x73\x75\x62\x74\x72\x61\x63\x74","\x66\x69\x6E\x64","\x63\x6F\x75\x6E\x74\x44\x6F\x63\x75\x6D\x65\x6E\x74\x73","\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E","\x66\x6F\x72\x45\x61\x63\x68","\x61\x76\x72\x46\x6C\x6F\x77","\x61\x76\x72\x5F\x66\x6C\x6F\x77","\x64\x61\x79\x73","\x64\x65\x6C\x65\x74\x65\x4D\x61\x6E\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20","\x54\x6F\x74\x61\x6C\x20\x72\x65\x63\x6F\x72\x64\x20\x64\x65\x6C\x65\x74\x65\x64\x20\x3D\x20","\x64\x65\x6C\x65\x74\x65\x64\x43\x6F\x75\x6E\x74","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x31","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x32","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x33","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x34","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x35","\x66\x6F\x72\x6D\x61\x74","\x6C\x6F\x63\x61\x6C","\x70\x75\x73\x68","\x69\x70","\x70\x6F\x72\x74","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x55\x53\x45\x52\x4E\x41\x4D\x45","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x6C\x69\x6D\x69\x74","\x73\x6F\x72\x74","\x66\x69\x6E\x64\x4F\x6E\x65","\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A","\x46\x69\x72\x73\x74\x20\x69\x6E\x69\x74\x69\x61\x6C\x69\x7A\x65\x20","\x69\x6E\x70\x75\x74","\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65","\x70\x72\x65\x73\x73\x75\x72\x65","\x66\x6C\x6F\x77","\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x20\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x66\x6C\x6F\x77\x2C\x20\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C","\x20\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x29\x20\x56\x41\x4C\x55\x45\x53\x20","\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x40\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x40\x66\x6C\x6F\x77\x2C\x20\x40\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C\x20\x40\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x29","\x71\x75\x65\x72\x79","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x61\x76\x72\x66\x6C\x6F\x77\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x61\x76\x72\x46\x6C\x6F\x77\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20\x31\x30\x20\x64\x61\x79\x73","\x65\x72\x72\x6F\x72","\x53\x51\x4C\x20\x68\x61\x73\x20\x69\x73\x73\x75\x65\x20","\x6F\x6E","\x63\x72\x65\x61\x74\x65","\x62\x61\x63\x6B\x6F\x66\x66","\x42\x61\x63\x6B\x6F\x66\x66\x20","\x20\x6E\x65\x78\x74\x20\x61\x74\x74\x65\x6D\x70\x74\x20\x69\x6E\x20","\x6D\x73","\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x5F\x6C\x6F\x73\x74","\x43\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x20\x6C\x6F\x73\x74","\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x5F\x72\x65\x65\x73\x74\x61\x62\x6C\x69\x73\x68\x65\x64","\x43\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x20\x72\x65\x2D\x65\x73\x74\x61\x62\x6C\x69\x73\x68\x65\x64","\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x5F\x66\x61\x69\x6C\x65\x64","\x43\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x20\x66\x61\x69\x6C\x65\x64","\x73\x74\x61\x72\x74\x5F\x72\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E","\x53\x74\x61\x72\x74\x69\x6E\x67\x20\x72\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E","\x61\x66\x74\x65\x72\x5F\x72\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E","\x41\x66\x74\x65\x72\x20\x52\x65\x63\x6F\x6E\x6E\x65\x63\x74\x69\x6F\x6E\x20\x65\x76\x65\x6E\x74\x20\x3D\x3E","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x70\x61\x73\x73\x77\x6F\x72\x64","\x63\x72\x65\x61\x74\x65\x53\x65\x73\x73\x69\x6F\x6E","\x63\x72\x65\x61\x74\x65\x53\x75\x62\x73\x63\x72\x69\x70\x74\x69\x6F\x6E\x32","\x73\x74\x61\x72\x74\x65\x64","\x6E\x73\x3D","\x3B\x73\x3D","\x6E\x61\x6D\x65","\x56\x61\x6C\x75\x65","\x69\x6E\x69\x74\x69\x61\x6C\x69\x7A\x65\x64","\x4F\x50\x43\x20\x55\x41\x20\x49\x6E\x69\x74\x69\x61\x6C\x69\x7A\x65\x64\x21\x20\x43\x6F\x6E\x6E\x65\x63\x74\x20\x74\x6F\x20\x46\x6C\x65\x78\x79\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6C\x6C\x79","\x63\x68\x61\x6E\x67\x65\x64","\x6E\x6F\x64\x65\x49\x64","\x69\x74\x65\x6D\x54\x6F\x4D\x6F\x6E\x69\x74\x6F\x72","\x73\x65\x72\x76\x65\x72\x54\x69\x6D\x65\x73\x74\x61\x6D\x70","\x66\x69\x6E\x64\x49\x6E\x64\x65\x78","\x74\x6F\x46\x69\x78\x65\x64","\x74\x69\x6D\x65","\x74\x65\x72\x6D\x69\x6E\x61\x74\x65","\x63\x6C\x6F\x73\x65","\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74","\x44\x6F\x6E\x65\x20\x21","\x45\x72\x72\x6F\x72"];require(_0x8d70[1])[_0x8d70[0]]();var moment=require(_0x8d70[2]);var mongoose=require(_0x8d70[3]);var sql=require(_0x8d70[4]);var RawData=require(_0x8d70[5]);var CalcData=require(_0x8d70[6]);mongoose[_0x8d70[8]](process[_0x8d70[7]].MONGO_URL,{useNewUrlParser:true,useUnifiedTopology:true});mongoose[_0x8d70[10]](_0x8d70[9],false);const sqlConfig=require(_0x8d70[11]);const {OPCUAClient,resolveNodeId,AttributeIds,ClientMonitoredItemGroup,TimestampsToReturn}=require(_0x8d70[12]);let TIER_2_BENCHMARK=parseFloat(process[_0x8d70[7]].TIER_2_BENCHMARK);let TIME_INTERVAL_GETDATA=parseInt(process[_0x8d70[7]].TIME_INTERVAL_GETDATA)* 1000;let TIME_INTERVAL_CALCDATA=parseInt(process[_0x8d70[7]].TIME_INTERVAL_CALCDATA)* 1000;let TIME_INTERVAL_REMOVE_DATA=parseInt(process[_0x8d70[7]].TIME_INTERVAL_REMOVE_DATA)* 86400000;let flexy_ns=process[_0x8d70[7]][_0x8d70[13]];var opc_server=[];var opc_server_avr=[];var interval_flag=0;async function run(){ await readFirstConfig(); await setTimeout(function(){},2000); await setInterval(async function(){if(interval_flag){let _0x64dfx10=opc_server[0][_0x8d70[15]][3][_0x8d70[14]];let _0x64dfx11=opc_server[0][_0x8d70[16]];let _0x64dfx12=opc_server[0][_0x8d70[17]];let _0x64dfx13,_0x64dfx14;if(_0x64dfx10> TIER_2_BENCHMARK){_0x64dfx13= TIER_2_BENCHMARK/ 60+ _0x64dfx11;_0x64dfx14= (_0x64dfx10- TIER_2_BENCHMARK)/ 60+ _0x64dfx12}else {_0x64dfx13= _0x64dfx10/ 60+ _0x64dfx11;_0x64dfx14= 0+ _0x64dfx12};opc_server[0][_0x8d70[16]]= _0x64dfx13;opc_server[0][_0x8d70[17]]= _0x64dfx14;let _0x64dfx15=opc_server[0][_0x8d70[18]];let _0x64dfx16=opc_server[0][_0x8d70[19]];insert_data(_0x64dfx15,_0x64dfx16,opc_server[0][_0x8d70[15]][0][_0x8d70[14]],opc_server[0][_0x8d70[15]][2][_0x8d70[14]],opc_server[0][_0x8d70[15]][1][_0x8d70[14]],opc_server[0][_0x8d70[15]][3][_0x8d70[14]],JSON[_0x8d70[20]](opc_server[0][_0x8d70[15]]),_0x64dfx13,_0x64dfx14,opc_server[0][_0x8d70[21]]);let _0x64dfx17={site_id:opc_server[0][_0x8d70[18]],site_name:opc_server[0][_0x8d70[19]],information:opc_server[0][_0x8d70[15]],tier1:opc_server[0][_0x8d70[16]],tier2:opc_server[0][_0x8d70[17]],created_at: new Date()}; await RawData[_0x8d70[24]](_0x64dfx17,function(_0x64dfx18,_0x64dfx19){if(_0x64dfx18){console[_0x8d70[23]](_0x8d70[22])}})}},TIME_INTERVAL_GETDATA); await setInterval(async function(){if(interval_flag){let _0x64dfx1a=moment()[_0x8d70[26]](15,_0x8d70[25]);let _0x64dfx1b=moment();let _0x64dfx1c={created_at:{$gte:_0x64dfx1a,$lte:_0x64dfx1b},tier1:{$gt:0}};let _0x64dfx1d= await RawData[_0x8d70[27]](_0x64dfx1c);let _0x64dfx1e= await RawData[_0x8d70[28]](_0x64dfx1c);let _0x64dfx1f=0;_0x64dfx1d[_0x8d70[30]](function(_0x64dfx20){_0x64dfx1f= _0x64dfx1f+ parseFloat(_0x64dfx20[_0x8d70[29]][3][_0x8d70[14]])});let _0x64dfx21=0;if(_0x64dfx1e> 0){_0x64dfx21= _0x64dfx1f/ _0x64dfx1e};let _0x64dfx22=opc_server_avr[_0x8d70[16]];let _0x64dfx23=opc_server_avr[_0x8d70[17]];let _0x64dfx24,_0x64dfx25;if(_0x64dfx21> TIER_2_BENCHMARK){_0x64dfx24= TIER_2_BENCHMARK/ 60+ _0x64dfx22;_0x64dfx25= (_0x64dfx21- TIER_2_BENCHMARK)/ 60+ _0x64dfx23}else {_0x64dfx24= _0x64dfx21/ 60+ _0x64dfx22;_0x64dfx25= 0+ _0x64dfx23};opc_server_avr[_0x8d70[16]]= _0x64dfx24;opc_server_avr[_0x8d70[17]]= _0x64dfx25;opc_server_avr[_0x8d70[21]]=  new Date();opc_server_avr[_0x8d70[31]]= _0x64dfx21;let _0x64dfx26=opc_server_avr;_0x64dfx26[_0x8d70[32]]= opc_server_avr[_0x8d70[31]];CalcData[_0x8d70[24]](_0x64dfx26,function(_0x64dfx18,_0x64dfx19){if(_0x64dfx18){console[_0x8d70[23]](_0x8d70[22])}});saveAvrDataToDatabase(opc_server[0][_0x8d70[18]],opc_server[0][_0x8d70[19]],opc_server_avr[_0x8d70[31]],opc_server_avr[_0x8d70[16]],opc_server_avr[_0x8d70[17]])}},TIME_INTERVAL_CALCDATA); await setInterval(async function(){let _0x64dfx27=moment()[_0x8d70[26]](10,_0x8d70[33]);const _0x64dfx28= await RawData[_0x8d70[34]]({created_at:{$lte:_0x64dfx27}});console[_0x8d70[23]](_0x8d70[35],_0x64dfx27,_0x8d70[36],_0x64dfx28[_0x8d70[37]]);deleteDataAfter10days()},TIME_INTERVAL_REMOVE_DATA); await setInterval(async function(){saveConnectionStatusToDatabase(opc_server[0][_0x8d70[18]],opc_server[0][_0x8d70[19]],opc_server[0][_0x8d70[15]][4][_0x8d70[14]])},TIME_INTERVAL_GETDATA); await readOPCUA1()}run();async function readFirstConfig(){let _0x64dfx2a=[];let _0x64dfx2b=[process[_0x8d70[7]][_0x8d70[38]],process[_0x8d70[7]][_0x8d70[39]],process[_0x8d70[7]][_0x8d70[40]],process[_0x8d70[7]][_0x8d70[41]],process[_0x8d70[7]][_0x8d70[42]]];for(const _0x64dfx2c of _0x64dfx2b){_0x64dfx2a[_0x8d70[45]]({name:_0x64dfx2c,value:0,time:moment()[_0x8d70[44]]()[_0x8d70[43]]()})};let _0x64dfx2d={id:1,site_id:process[_0x8d70[7]][_0x8d70[18]],site_name:process[_0x8d70[7]][_0x8d70[19]],ip:process[_0x8d70[7]][_0x8d70[46]],port:parseInt(process[_0x8d70[7]][_0x8d70[47]]),username:process[_0x8d70[7]][_0x8d70[48]],password:process[_0x8d70[7]][_0x8d70[49]],data:_0x64dfx2a,tier1:0,tier2:0,created_at: new Date()};opc_server_avr= {avrFlow:0,tier1:0,tier2:0};let _0x64dfx2e= await RawData[_0x8d70[52]]()[_0x8d70[51]]({_id:-1})[_0x8d70[50]](1);if(_0x64dfx2e){_0x64dfx2d[_0x8d70[16]]= _0x64dfx2e[_0x8d70[16]];_0x64dfx2d[_0x8d70[17]]= _0x64dfx2e[_0x8d70[17]]}else {_0x64dfx2d[_0x8d70[16]]= parseFloat(process[_0x8d70[7]].START_TIER_1);_0x64dfx2d[_0x8d70[17]]= parseFloat(process[_0x8d70[7]].START_TIER_2)};let _0x64dfx2f= await CalcData[_0x8d70[52]]()[_0x8d70[51]]({_id:-1})[_0x8d70[50]](1);if(_0x64dfx2f){opc_server_avr[_0x8d70[16]]= _0x64dfx2f[_0x8d70[16]];opc_server_avr[_0x8d70[17]]= _0x64dfx2f[_0x8d70[17]]}else {opc_server_avr[_0x8d70[16]]= parseFloat(process[_0x8d70[7]].START_AVR_TIER_1);opc_server_avr[_0x8d70[17]]= parseFloat(process[_0x8d70[7]].START_AVR_TIER_2)};opc_server[_0x8d70[45]](_0x64dfx2d);console[_0x8d70[23]](_0x8d70[53]);console[_0x8d70[23]](_0x8d70[54],opc_server,opc_server_avr);return}function insert_data(_0x64dfx31,_0x64dfx32,_0x64dfx33,_0x64dfx34,_0x64dfx35,_0x64dfx36,_0x64dfx37,_0x64dfx13,_0x64dfx14,_0x64dfx38){sql[_0x8d70[8]](sqlConfig,function(_0x64dfx39){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}else {var _0x64dfx3a= new sql.Request();_0x64dfx3a[_0x8d70[55]](_0x8d70[18],sql.VarChar,_0x64dfx31);_0x64dfx3a[_0x8d70[55]](_0x8d70[19],sql.VarChar,_0x64dfx32);_0x64dfx3a[_0x8d70[55]](_0x8d70[29],sql.VarChar,_0x64dfx37);_0x64dfx3a[_0x8d70[55]](_0x8d70[21],sql.DateTimeOffset,_0x64dfx38);_0x64dfx3a[_0x8d70[55]](_0x8d70[56],sql.Decimal(10,2),parseFloat(_0x64dfx33+ 0.0));_0x64dfx3a[_0x8d70[55]](_0x8d70[57],sql.Decimal(10,2),parseFloat(_0x64dfx34+ 0.0));_0x64dfx3a[_0x8d70[55]](_0x8d70[58],sql.Decimal(10,2),parseFloat(_0x64dfx35+ 0.0));_0x64dfx3a[_0x8d70[55]](_0x8d70[59],sql.Decimal(10,2),parseFloat(_0x64dfx36+ 0.0));_0x64dfx3a[_0x8d70[55]](_0x8d70[16],sql.Decimal(10,2),parseFloat(_0x64dfx13));_0x64dfx3a[_0x8d70[55]](_0x8d70[17],sql.Decimal(10,2),parseFloat(_0x64dfx14));let _0x64dfx3b=_0x8d70[60]+ _0x8d70[61]+ _0x8d70[62];_0x64dfx3a[_0x8d70[63]](_0x64dfx3b,function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}})}})}function saveAvrDataToDatabase(_0x64dfx31,_0x64dfx32,_0x64dfx3e,_0x64dfx13,_0x64dfx14){sql[_0x8d70[8]](sqlConfig,function(_0x64dfx39){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}else {var _0x64dfx3a= new sql.Request();_0x64dfx3a[_0x8d70[55]](_0x8d70[18],sql.VarChar,_0x64dfx31);_0x64dfx3a[_0x8d70[55]](_0x8d70[19],sql.VarChar,_0x64dfx32);_0x64dfx3a[_0x8d70[55]](_0x8d70[31],sql.Decimal(10,2),parseFloat(_0x64dfx3e));_0x64dfx3a[_0x8d70[55]](_0x8d70[16],sql.Decimal(10,2),parseFloat(_0x64dfx13));_0x64dfx3a[_0x8d70[55]](_0x8d70[17],sql.Decimal(10,2),parseFloat(_0x64dfx14));_0x64dfx3a[_0x8d70[55]](_0x8d70[21],sql.DateTimeOffset, new Date());_0x64dfx3a[_0x8d70[63]](_0x8d70[64],function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}})}})}function saveConnectionStatusToDatabase(_0x64dfx31,_0x64dfx32,_0x64dfx40){sql[_0x8d70[8]](sqlConfig,function(_0x64dfx39){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}else {var _0x64dfx3a= new sql.Request();_0x64dfx3a[_0x8d70[55]](_0x8d70[18],sql.VarChar,_0x64dfx31);_0x64dfx3a[_0x8d70[55]](_0x8d70[19],sql.VarChar,_0x64dfx32);_0x64dfx3a[_0x8d70[55]](_0x8d70[65],sql.Bit,_0x64dfx40);_0x64dfx3a[_0x8d70[55]](_0x8d70[21],sql.DateTimeOffset, new Date());_0x64dfx3a[_0x8d70[63]](_0x8d70[66],function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}})}})}function deleteDataAfter10days(){sql[_0x8d70[8]](sqlConfig,function(_0x64dfx39){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}else {var _0x64dfx3a= new sql.Request();let _0x64dfx27=moment()[_0x8d70[26]](10,_0x8d70[33]);let _0x64dfx42= new Date(_0x64dfx27);_0x64dfx3a[_0x8d70[55]](_0x8d70[67],sql.DateTimeOffset,_0x64dfx42);_0x64dfx3a[_0x8d70[63]](_0x8d70[68],function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}});_0x64dfx3a[_0x8d70[63]](_0x8d70[69],function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)}});_0x64dfx3a[_0x8d70[63]](_0x8d70[70],function(_0x64dfx39,_0x64dfx3c){if(_0x64dfx39){console[_0x8d70[23]](_0x64dfx39)};console[_0x8d70[23]](_0x8d70[71])})}});sql[_0x8d70[74]](_0x8d70[72],(_0x64dfx39)=>{console[_0x8d70[23]](_0x8d70[73],_0x64dfx39)})}async function readOPCUA1(){try{const _0x64dfx44={endpoint_must_exist:false};const _0x64dfx45=OPCUAClient[_0x8d70[75]](_0x64dfx44);_0x64dfx45[_0x8d70[74]](_0x8d70[76],(_0x64dfx46,_0x64dfx47)=>{console[_0x8d70[23]](_0x8d70[77],_0x64dfx46,_0x8d70[78],_0x64dfx47,_0x8d70[79])});_0x64dfx45[_0x8d70[74]](_0x8d70[80],()=>{console[_0x8d70[23]](_0x8d70[81]);opc_server[0][_0x8d70[15]][4][_0x8d70[14]]= 0});_0x64dfx45[_0x8d70[74]](_0x8d70[82],()=>{console[_0x8d70[23]](_0x8d70[83]);readOPCUA1()});_0x64dfx45[_0x8d70[74]](_0x8d70[84],()=>{console[_0x8d70[23]](_0x8d70[85]);opc_server[0][_0x8d70[15]][4][_0x8d70[14]]= 0});_0x64dfx45[_0x8d70[74]](_0x8d70[86],()=>{console[_0x8d70[23]](_0x8d70[87])});_0x64dfx45[_0x8d70[74]](_0x8d70[88],(_0x64dfx39)=>{console[_0x8d70[23]](_0x8d70[89],_0x64dfx39)}); await _0x64dfx45[_0x8d70[8]](process[_0x8d70[7]].FLEXY_URL);const _0x64dfx48= await _0x64dfx45[_0x8d70[92]]({userName:opc_server[0][_0x8d70[90]],password:opc_server[0][_0x8d70[91]]});const _0x64dfx49= await _0x64dfx48[_0x8d70[93]]({maxNotificationsPerPublish:5000,publishingEnabled:true,requestedLifetimeCount:500,requestedMaxKeepAliveCount:50,requestedPublishingInterval:5000});_0x64dfx49[_0x8d70[74]](_0x8d70[94],(_0x64dfx4a)=>{});const _0x64dfx4b=[];opc_server[0][_0x8d70[15]][_0x8d70[30]](function(_0x64dfx4c){let _0x64dfx4d=_0x8d70[95]+ flexy_ns+ _0x8d70[96]+ _0x64dfx4c[_0x8d70[97]];let _0x64dfx4e={attributeId:AttributeIds[_0x8d70[98]],nodeId:resolveNodeId(_0x64dfx4d)};_0x64dfx4b[_0x8d70[45]](_0x64dfx4e)});const _0x64dfx4f={discardOldest:true,queueSize:1,samplingInterval:10};const _0x64dfx50=ClientMonitoredItemGroup[_0x8d70[75]](_0x64dfx49,_0x64dfx4b,_0x64dfx4f,TimestampsToReturn.Both);_0x64dfx50[_0x8d70[74]](_0x8d70[99],()=>{console[_0x8d70[23]](_0x8d70[100]);opc_server[0][_0x8d70[15]][4][_0x8d70[14]]= 1});_0x64dfx50[_0x8d70[74]](_0x8d70[101],(_0x64dfx51,_0x64dfx52,_0x64dfx53)=>{let _0x64dfx54=_0x64dfx51[_0x8d70[103]][_0x8d70[102]][_0x8d70[14]];let _0x64dfx55=_0x64dfx52[_0x8d70[104]].toString();var _0x64dfx56=opc_server[0][_0x8d70[15]][_0x8d70[105]](function(_0x64dfx57,_0x64dfx58){return _0x64dfx57[_0x8d70[97]]=== _0x64dfx54});opc_server[0][_0x8d70[15]][_0x64dfx56][_0x8d70[14]]= parseFloat(_0x64dfx52[_0x8d70[14]][_0x8d70[14]][_0x8d70[106]](2));opc_server[0][_0x8d70[15]][_0x64dfx56][_0x8d70[107]]=  new Date(_0x64dfx55);opc_server[0][_0x8d70[21]]=  new Date(_0x64dfx55);opc_server[0][_0x8d70[15]][4][_0x8d70[14]]= 1;interval_flag= 1}); await  new Promise((_0x64dfx59)=>setTimeout(_0x64dfx59,1000000000)); await _0x64dfx50[_0x8d70[108]](); await _0x64dfx48[_0x8d70[109]](); await _0x64dfx45[_0x8d70[110]]();console[_0x8d70[23]](_0x8d70[111]);readOPCUA1()}catch(err){console[_0x8d70[23]](_0x8d70[112],err)}}