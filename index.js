var _0x50fc=["\x63\x6F\x6E\x66\x69\x67","\x64\x6F\x74\x65\x6E\x76","\x6D\x6F\x6D\x65\x6E\x74","\x6D\x6F\x6E\x67\x6F\x6F\x73\x65","\x6D\x73\x73\x71\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x72\x61\x77\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x2E\x2F\x6D\x6F\x64\x65\x6C\x73\x2F\x63\x61\x6C\x63\x64\x61\x74\x61\x2E\x6D\x6F\x64\x65\x6C","\x65\x6E\x76","\x63\x6F\x6E\x6E\x65\x63\x74","\x75\x73\x65\x46\x69\x6E\x64\x41\x6E\x64\x4D\x6F\x64\x69\x66\x79","\x73\x65\x74","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x44\x41\x54\x41\x42\x41\x53\x45","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x55\x53\x45\x52\x4E\x41\x4D\x45","\x53\x51\x4C\x5F\x53\x45\x52\x56\x45\x52\x5F\x53\x45\x52\x56\x45\x52","\x46\x4C\x45\x58\x59\x5F\x4E\x61\x6D\x65\x73\x70\x61\x63\x65","\x76\x61\x6C\x75\x65","\x64\x61\x74\x61","\x74\x69\x65\x72\x31","\x74\x69\x65\x72\x32","\x73\x69\x74\x65\x5F\x69\x64","\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65","\x73\x74\x72\x69\x6E\x67\x69\x66\x79","\x45\x72\x72\x6F\x72\x20\x73\x61\x76\x65\x20\x64\x61\x74\x61\x20\x74\x6F\x20\x4C\x6F\x63\x61\x6C\x20\x64\x61\x74\x61","\x6C\x6F\x67","\x69\x6E\x73\x65\x72\x74\x4D\x61\x6E\x79","\x6D\x69\x6E\x75\x74\x65\x73","\x73\x75\x62\x74\x72\x61\x63\x74","\x66\x69\x6E\x64","\x63\x6F\x75\x6E\x74\x44\x6F\x63\x75\x6D\x65\x6E\x74\x73","\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E","\x66\x6F\x72\x45\x61\x63\x68","\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74","\x61\x76\x72\x46\x6C\x6F\x77","\x61\x76\x72\x5F\x66\x6C\x6F\x77","\x64\x61\x79\x73","\x64\x65\x6C\x65\x74\x65\x4D\x61\x6E\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20","\x54\x6F\x74\x61\x6C\x20\x72\x65\x63\x6F\x72\x64\x20\x64\x65\x6C\x65\x74\x65\x64\x20\x3D\x20","\x64\x65\x6C\x65\x74\x65\x64\x43\x6F\x75\x6E\x74","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x31","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x32","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x33","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x34","\x46\x4C\x45\x58\x59\x5F\x54\x61\x67\x6E\x61\x6D\x65\x35","\x66\x6F\x72\x6D\x61\x74","\x6C\x6F\x63\x61\x6C","\x70\x75\x73\x68","\x69\x70","\x70\x6F\x72\x74","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x55\x53\x45\x52\x4E\x41\x4D\x45","\x4F\x50\x43\x5F\x53\x45\x52\x56\x45\x52\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x6C\x69\x6D\x69\x74","\x73\x6F\x72\x74","\x66\x69\x6E\x64\x4F\x6E\x65","\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A\x2A","\x46\x69\x72\x73\x74\x20\x69\x6E\x69\x74\x69\x61\x6C\x20","\x6E\x6F\x64\x65\x2D\x6F\x70\x63\x75\x61","\x61\x73\x79\x6E\x63","\x6F\x70\x63\x2E\x74\x63\x70\x3A\x2F\x2F","\x3A","\x43\x61\x6E\x6E\x6F\x74\x20\x63\x6F\x6E\x6E\x65\x63\x74\x20\x74\x6F\x20\x65\x6E\x64\x70\x6F\x69\x6E\x74\x3A\x20","\x43\x6F\x6E\x6E\x65\x63\x74\x65\x64\x20\x74\x6F\x20\x46\x6C\x65\x78\x79\x21","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x70\x61\x73\x73\x77\x6F\x72\x64","\x63\x72\x65\x61\x74\x65\x53\x65\x73\x73\x69\x6F\x6E","\x74\x65\x72\x6D\x69\x6E\x61\x74\x65\x64","\x6F\x6E","\x6B\x65\x65\x70\x61\x6C\x69\x76\x65","\x73\x74\x61\x72\x74\x65\x64","\x6E\x73\x3D","\x3B\x73\x3D","\x6E\x61\x6D\x65","\x72\x65\x73\x6F\x6C\x76\x65\x4E\x6F\x64\x65\x49\x64","\x6D\x6F\x6E\x69\x74\x6F\x72","\x63\x68\x61\x6E\x67\x65\x64","\x22\x54\x61\x67\x4E\x61\x6D\x65\x22","\x22","\x2C","\x22\x56\x61\x6C\x75\x65\x22","\x66\x69\x6E\x64\x49\x6E\x64\x65\x78","\x74\x6F\x46\x69\x78\x65\x64","\x74\x69\x6D\x65","\x43\x6C\x6F\x73\x69\x6E\x67\x20\x73\x65\x73\x73\x69\x6F\x6E","\x53\x65\x73\x73\x69\x6F\x6E\x20\x63\x6C\x6F\x73\x65\x64","\x63\x6C\x6F\x73\x65","\x46\x61\x69\x6C\x75\x72\x65\x20","\x64\x6F\x6E\x65\x21","\x43\x6C\x69\x65\x6E\x74\x20\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74\x65\x64","\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74","\x73\x65\x72\x69\x65\x73","\x69\x6E\x70\x75\x74","\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65","\x70\x72\x65\x73\x73\x75\x72\x65","\x66\x6C\x6F\x77","\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x20\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x66\x6C\x6F\x77\x2C\x20\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C","\x20\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x29\x20\x56\x41\x4C\x55\x45\x53\x20","\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x74\x65\x6D\x70\x65\x72\x61\x74\x75\x72\x65\x2C\x40\x70\x72\x65\x73\x73\x75\x72\x65\x2C\x20\x40\x66\x6C\x6F\x77\x2C\x20\x40\x63\x6F\x6D\x70\x65\x6E\x73\x61\x74\x65\x64\x66\x6C\x6F\x77\x2C\x20\x40\x69\x6E\x66\x6F\x72\x6D\x61\x74\x69\x6F\x6E\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x29","\x71\x75\x65\x72\x79","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x61\x76\x72\x66\x6C\x6F\x77\x2C\x20\x74\x69\x65\x72\x31\x2C\x20\x74\x69\x65\x72\x32\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x61\x76\x72\x46\x6C\x6F\x77\x2C\x20\x40\x74\x69\x65\x72\x31\x2C\x20\x40\x74\x69\x65\x72\x32\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74","\x49\x4E\x53\x45\x52\x54\x20\x49\x4E\x54\x4F\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x28\x73\x69\x74\x65\x5F\x69\x64\x2C\x20\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29\x20\x56\x41\x4C\x55\x45\x53\x20\x28\x40\x73\x69\x74\x65\x5F\x69\x64\x2C\x40\x73\x69\x74\x65\x5F\x6E\x61\x6D\x65\x2C\x20\x40\x69\x73\x5F\x63\x6F\x6E\x6E\x65\x63\x74\x2C\x20\x40\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x29","\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x31\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x32\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x45\x4C\x45\x54\x45\x20\x46\x52\x4F\x4D\x20\x44\x61\x74\x61\x4C\x6F\x67\x67\x65\x72\x53\x74\x61\x74\x75\x73\x20\x57\x48\x45\x52\x45\x20\x63\x72\x65\x61\x74\x65\x64\x5F\x61\x74\x20\x3C\x20\x40\x62\x65\x66\x6F\x72\x65\x64\x61\x79","\x44\x65\x6C\x65\x74\x65\x64\x20\x64\x61\x74\x61\x20\x62\x65\x66\x6F\x72\x65\x20\x31\x30\x20\x64\x61\x79\x73","\x65\x72\x72\x6F\x72","\x53\x51\x4C\x20\x68\x61\x73\x20\x69\x73\x73\x75\x65\x20"];require(_0x50fc[1])[_0x50fc[0]]();var moment=require(_0x50fc[2]);var mongoose=require(_0x50fc[3]);var sql=require(_0x50fc[4]);var RawData=require(_0x50fc[5]);var CalcData=require(_0x50fc[6]);mongoose[_0x50fc[8]](process[_0x50fc[7]].MONGO_URL,{useNewUrlParser:true,useUnifiedTopology:true});mongoose[_0x50fc[10]](_0x50fc[9],false);const sqlConfig={password:process[_0x50fc[7]][_0x50fc[11]],database:process[_0x50fc[7]][_0x50fc[12]],stream:false,options:{enableArithAbort:true,encrypt:true},port:parseInt(process[_0x50fc[7]].SQL_SERVER_PORT),user:process[_0x50fc[7]][_0x50fc[13]],server:process[_0x50fc[7]][_0x50fc[14]]};let TIER_2_BENCHMARK=parseFloat(process[_0x50fc[7]].TIER_2_BENCHMARK);let TIME_INTERVAL_GETDATA=parseInt(process[_0x50fc[7]].TIME_INTERVAL_GETDATA)* 1000;let TIME_INTERVAL_CALCDATA=parseInt(process[_0x50fc[7]].TIME_INTERVAL_CALCDATA)* 1000;let TIME_INTERVAL_REMOVE_DATA=parseInt(process[_0x50fc[7]].TIME_INTERVAL_REMOVE_DATA)* 86400000;let flexy_ns=process[_0x50fc[7]][_0x50fc[15]];var opc_server=[];var opc_server_avr=[];async function run(){ await readFirstConfig(); await readOPCUA(); await setTimeout(function(){},4000); await setInterval(async function(){let _0x4f0cxf=opc_server[0][_0x50fc[17]][3][_0x50fc[16]];let _0x4f0cx10=opc_server[0][_0x50fc[18]];let _0x4f0cx11=opc_server[0][_0x50fc[19]];let _0x4f0cx12,_0x4f0cx13;if(_0x4f0cxf> TIER_2_BENCHMARK){_0x4f0cx12= TIER_2_BENCHMARK/ 60+ _0x4f0cx10;_0x4f0cx13= (_0x4f0cxf- TIER_2_BENCHMARK)/ 60+ _0x4f0cx11}else {_0x4f0cx12= _0x4f0cxf/ 60+ _0x4f0cx10;_0x4f0cx13= 0+ _0x4f0cx11};opc_server[0][_0x50fc[18]]= _0x4f0cx12;opc_server[0][_0x50fc[19]]= _0x4f0cx13;insert_data(opc_server[0][_0x50fc[20]],opc_server[0][_0x50fc[21]],opc_server[0][_0x50fc[17]][0][_0x50fc[16]],opc_server[0][_0x50fc[17]][2][_0x50fc[16]],opc_server[0][_0x50fc[17]][1][_0x50fc[16]],opc_server[0][_0x50fc[17]][3][_0x50fc[16]],JSON[_0x50fc[22]](opc_server[0][_0x50fc[17]]),_0x4f0cx12,_0x4f0cx13);saveConnectionStatusToDatabase(opc_server[0][_0x50fc[20]],opc_server[0][_0x50fc[21]],opc_server[0][_0x50fc[17]][4][_0x50fc[16]]);let _0x4f0cx14={site_id:opc_server[0][_0x50fc[20]],site_name:opc_server[0][_0x50fc[21]],information:opc_server[0][_0x50fc[17]],tier1:opc_server[0][_0x50fc[18]],tier2:opc_server[0][_0x50fc[19]],created_at: new Date()}; await RawData[_0x50fc[25]](_0x4f0cx14,function(_0x4f0cx15,_0x4f0cx16){if(_0x4f0cx15){console[_0x50fc[24]](_0x50fc[23])}})},TIME_INTERVAL_GETDATA); await setInterval(async function(){let _0x4f0cx17=moment()[_0x50fc[27]](15,_0x50fc[26]);let _0x4f0cx18=moment();let _0x4f0cx19={created_at:{$gte:_0x4f0cx17,$lte:_0x4f0cx18},tier1:{$gt:0}};let _0x4f0cx1a= await RawData[_0x50fc[28]](_0x4f0cx19);let _0x4f0cx1b= await RawData[_0x50fc[29]](_0x4f0cx19);let _0x4f0cx1c=0;_0x4f0cx1a[_0x50fc[31]](function(_0x4f0cx1d){_0x4f0cx1c= _0x4f0cx1c+ parseFloat(_0x4f0cx1d[_0x50fc[30]][3][_0x50fc[16]])});let _0x4f0cx1e=0;if(_0x4f0cx1b> 0){_0x4f0cx1e= _0x4f0cx1c/ _0x4f0cx1b};let _0x4f0cx1f=opc_server_avr[_0x50fc[18]];let _0x4f0cx20=opc_server_avr[_0x50fc[19]];let _0x4f0cx21,_0x4f0cx22;if(_0x4f0cx1e> TIER_2_BENCHMARK){_0x4f0cx21= TIER_2_BENCHMARK/ 60+ _0x4f0cx1f;_0x4f0cx22= (_0x4f0cx1e- TIER_2_BENCHMARK)/ 60+ _0x4f0cx20}else {_0x4f0cx21= _0x4f0cx1e/ 60+ _0x4f0cx1f;_0x4f0cx22= 0+ _0x4f0cx20};opc_server_avr[_0x50fc[18]]= _0x4f0cx21;opc_server_avr[_0x50fc[19]]= _0x4f0cx22;opc_server_avr[_0x50fc[32]]=  new Date();opc_server_avr[_0x50fc[33]]= _0x4f0cx1e;let _0x4f0cx23=opc_server_avr;_0x4f0cx23[_0x50fc[34]]= opc_server_avr[_0x50fc[33]];CalcData[_0x50fc[25]](_0x4f0cx23,function(_0x4f0cx15,_0x4f0cx16){if(_0x4f0cx15){console[_0x50fc[24]](_0x50fc[23])}});saveAvrDataToDatabase(opc_server[0][_0x50fc[20]],opc_server[0][_0x50fc[21]],opc_server_avr[_0x50fc[33]],opc_server_avr[_0x50fc[18]],opc_server_avr[_0x50fc[19]])},TIME_INTERVAL_CALCDATA); await setInterval(async function(){let _0x4f0cx24=moment()[_0x50fc[27]](10,_0x50fc[35]);const _0x4f0cx25= await RawData[_0x50fc[36]]({created_at:{$lte:_0x4f0cx24}});console[_0x50fc[24]](_0x50fc[37],_0x4f0cx24,_0x50fc[38],_0x4f0cx25[_0x50fc[39]]);deleteDataAfter10days()},TIME_INTERVAL_REMOVE_DATA)}run();async function readFirstConfig(){let _0x4f0cx27=[];let _0x4f0cx28=[process[_0x50fc[7]][_0x50fc[40]],process[_0x50fc[7]][_0x50fc[41]],process[_0x50fc[7]][_0x50fc[42]],process[_0x50fc[7]][_0x50fc[43]],process[_0x50fc[7]][_0x50fc[44]]];for(const _0x4f0cx29 of _0x4f0cx28){_0x4f0cx27[_0x50fc[47]]({name:_0x4f0cx29,value:0,time:moment()[_0x50fc[46]]()[_0x50fc[45]]()})};let _0x4f0cx2a={id:1,site_id:process[_0x50fc[7]][_0x50fc[20]],site_name:process[_0x50fc[7]][_0x50fc[21]],ip:process[_0x50fc[7]][_0x50fc[48]],port:parseInt(process[_0x50fc[7]][_0x50fc[49]]),username:process[_0x50fc[7]][_0x50fc[50]],password:process[_0x50fc[7]][_0x50fc[51]],data:_0x4f0cx27,tier1:0,tier2:0};opc_server_avr= {avrFlow:0,tier1:0,tier2:0};let _0x4f0cx2b= await RawData[_0x50fc[54]]()[_0x50fc[53]]({_id:-1})[_0x50fc[52]](1);if(_0x4f0cx2b){_0x4f0cx2a[_0x50fc[18]]= _0x4f0cx2b[_0x50fc[18]];_0x4f0cx2a[_0x50fc[19]]= _0x4f0cx2b[_0x50fc[19]]}else {_0x4f0cx2a[_0x50fc[18]]= parseFloat(process[_0x50fc[7]].START_TIER_1);_0x4f0cx2a[_0x50fc[19]]= parseFloat(process[_0x50fc[7]].START_TIER_2)};let _0x4f0cx2c= await CalcData[_0x50fc[54]]()[_0x50fc[53]]({_id:-1})[_0x50fc[52]](1);if(_0x4f0cx2c){opc_server_avr[_0x50fc[18]]= _0x4f0cx2c[_0x50fc[18]];opc_server_avr[_0x50fc[19]]= _0x4f0cx2c[_0x50fc[19]]}else {opc_server_avr[_0x50fc[18]]= parseFloat(process[_0x50fc[7]].START_AVR_TIER_1);opc_server_avr[_0x50fc[19]]= parseFloat(process[_0x50fc[7]].START_AVR_TIER_2)};opc_server[_0x50fc[47]](_0x4f0cx2a);console[_0x50fc[24]](_0x50fc[55]);console[_0x50fc[24]](_0x50fc[56],opc_server,opc_server_avr);return}async function readOPCUA(){var _0x4f0cx2e=require(_0x50fc[57]),_0x4f0cx2f=require(_0x50fc[58]),_0x4f0cx30= new _0x4f0cx2e.OPCUAClient(),_0x4f0cx31= new Array(),_0x4f0cx32=0,_0x4f0cx33= new Array(),_0x4f0cx34=null;const _0x4f0cx35=_0x50fc[59]+ opc_server[0][_0x50fc[48]]+ _0x50fc[60]+ opc_server[0][_0x50fc[49]];_0x4f0cx2f[_0x50fc[90]]([function(_0x4f0cx36){_0x4f0cx30[_0x50fc[8]](_0x4f0cx35,function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x50fc[61],_0x4f0cx35)}else {console[_0x50fc[24]](_0x50fc[62])};_0x4f0cx36(_0x4f0cx37)})},function(_0x4f0cx36){_0x4f0cx30[_0x50fc[65]]({userName:opc_server[0][_0x50fc[63]],password:opc_server[0][_0x50fc[64]]},function(_0x4f0cx37,_0x4f0cx38){if(!_0x4f0cx37){_0x4f0cx34= _0x4f0cx38};_0x4f0cx36(_0x4f0cx37)})},function(_0x4f0cx36){the_subscription=  new _0x4f0cx2e.ClientSubscription(_0x4f0cx34,{requestedPublishingInterval:1000,requestedLifetimeCount:10,requestedMaxKeepAliveCount:2,maxNotificationsPerPublish:10,publishingEnabled:true,priority:10});the_subscription[_0x50fc[67]](_0x50fc[69],function(){})[_0x50fc[67]](_0x50fc[68],function(){opc_server[0][_0x50fc[17]][4][_0x50fc[16]]= 1})[_0x50fc[67]](_0x50fc[66],function(){opc_server[0][_0x50fc[17]][4][_0x50fc[16]]= 0;_0x4f0cx36()});opc_server[0][_0x50fc[17]][_0x50fc[31]](function(_0x4f0cx39){var _0x4f0cx3a=_0x50fc[70]+ flexy_ns+ _0x50fc[71]+ _0x4f0cx39[_0x50fc[72]];_0x4f0cx33[_0x4f0cx32]= the_subscription[_0x50fc[74]]({nodeId:_0x4f0cx2e[_0x50fc[73]](_0x4f0cx3a),attributeId:13},{samplingInterval:200,discardOldest:true,queueSize:10});_0x4f0cx33[_0x4f0cx32][_0x50fc[67]](_0x50fc[75],function(_0x4f0cx3b){message= _0x50fc[76]+ _0x50fc[60]+ _0x50fc[77]+ _0x4f0cx39[_0x50fc[72]]+ _0x50fc[77]+ _0x50fc[78]+ _0x50fc[79]+ _0x50fc[60]+ _0x4f0cx3b[_0x50fc[16]][_0x50fc[16]];var _0x4f0cx3c=opc_server[0][_0x50fc[17]][_0x50fc[80]](function(_0x4f0cx3d,_0x4f0cx3e){return _0x4f0cx3d[_0x50fc[72]]=== _0x4f0cx39[_0x50fc[72]]});opc_server[0][_0x50fc[17]][_0x4f0cx3c][_0x50fc[16]]= parseFloat(_0x4f0cx3b[_0x50fc[16]][_0x50fc[16]][_0x50fc[81]](2));opc_server[0][_0x50fc[17]][_0x4f0cx3c][_0x50fc[82]]=  new Date();console[_0x50fc[24]](message)});_0x4f0cx32= _0x4f0cx32+ 1})},function(_0x4f0cx36){console[_0x50fc[24]](_0x50fc[83]);_0x4f0cx34[_0x50fc[85]](function(_0x4f0cx37){console[_0x50fc[24]](_0x50fc[84]);_0x4f0cx36()})}],function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x50fc[86],_0x4f0cx37);opc_server[0][_0x50fc[17]][4][_0x50fc[16]]= 0}else {console[_0x50fc[24]](_0x50fc[87])};_0x4f0cx30[_0x50fc[89]](function(){opc_server[0][_0x50fc[17]][4][_0x50fc[16]]= 0;console[_0x50fc[24]](_0x50fc[88])})})}function insert_data(_0x4f0cx40,_0x4f0cx41,_0x4f0cx42,_0x4f0cx43,_0x4f0cx44,_0x4f0cx45,_0x4f0cx46,_0x4f0cx12,_0x4f0cx13){sql[_0x50fc[8]](sqlConfig,function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}else {var _0x4f0cx47= new sql.Request();_0x4f0cx47[_0x50fc[91]](_0x50fc[20],sql.VarChar,_0x4f0cx40);_0x4f0cx47[_0x50fc[91]](_0x50fc[21],sql.VarChar,_0x4f0cx41);_0x4f0cx47[_0x50fc[91]](_0x50fc[30],sql.VarChar,_0x4f0cx46);_0x4f0cx47[_0x50fc[91]](_0x50fc[32],sql.DateTimeOffset, new Date());_0x4f0cx47[_0x50fc[91]](_0x50fc[92],sql.Decimal(10,2),parseFloat(_0x4f0cx42+ 0.0));_0x4f0cx47[_0x50fc[91]](_0x50fc[93],sql.Decimal(10,2),parseFloat(_0x4f0cx43+ 0.0));_0x4f0cx47[_0x50fc[91]](_0x50fc[94],sql.Decimal(10,2),parseFloat(_0x4f0cx44+ 0.0));_0x4f0cx47[_0x50fc[91]](_0x50fc[95],sql.Decimal(10,2),parseFloat(_0x4f0cx45+ 0.0));_0x4f0cx47[_0x50fc[91]](_0x50fc[18],sql.Decimal(10,2),parseFloat(_0x4f0cx12));_0x4f0cx47[_0x50fc[91]](_0x50fc[19],sql.Decimal(10,2),parseFloat(_0x4f0cx13));let _0x4f0cx48=_0x50fc[96]+ _0x50fc[97]+ _0x50fc[98];_0x4f0cx47[_0x50fc[99]](_0x4f0cx48,function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}})}})}function saveAvrDataToDatabase(_0x4f0cx40,_0x4f0cx41,_0x4f0cx4b,_0x4f0cx12,_0x4f0cx13){sql[_0x50fc[8]](sqlConfig,function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}else {var _0x4f0cx47= new sql.Request();_0x4f0cx47[_0x50fc[91]](_0x50fc[20],sql.VarChar,_0x4f0cx40);_0x4f0cx47[_0x50fc[91]](_0x50fc[21],sql.VarChar,_0x4f0cx41);_0x4f0cx47[_0x50fc[91]](_0x50fc[33],sql.Decimal(10,2),parseFloat(_0x4f0cx4b));_0x4f0cx47[_0x50fc[91]](_0x50fc[18],sql.Decimal(10,2),parseFloat(_0x4f0cx12));_0x4f0cx47[_0x50fc[91]](_0x50fc[19],sql.Decimal(10,2),parseFloat(_0x4f0cx13));_0x4f0cx47[_0x50fc[91]](_0x50fc[32],sql.DateTimeOffset, new Date());_0x4f0cx47[_0x50fc[99]](_0x50fc[100],function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}})}})}function saveConnectionStatusToDatabase(_0x4f0cx40,_0x4f0cx41,_0x4f0cx4d){sql[_0x50fc[8]](sqlConfig,function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}else {var _0x4f0cx47= new sql.Request();_0x4f0cx47[_0x50fc[91]](_0x50fc[20],sql.VarChar,_0x4f0cx40);_0x4f0cx47[_0x50fc[91]](_0x50fc[21],sql.VarChar,_0x4f0cx41);_0x4f0cx47[_0x50fc[91]](_0x50fc[101],sql.Bit,_0x4f0cx4d);_0x4f0cx47[_0x50fc[91]](_0x50fc[32],sql.DateTimeOffset, new Date());_0x4f0cx47[_0x50fc[99]](_0x50fc[102],function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}})}})}function deleteDataAfter10days(){sql[_0x50fc[8]](sqlConfig,function(_0x4f0cx37){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}else {var _0x4f0cx47= new sql.Request();let _0x4f0cx24=moment()[_0x50fc[27]](10,_0x50fc[35]);let _0x4f0cx4f= new Date(_0x4f0cx24);_0x4f0cx47[_0x50fc[91]](_0x50fc[103],sql.DateTimeOffset,_0x4f0cx4f);_0x4f0cx47[_0x50fc[99]](_0x50fc[104],function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}});_0x4f0cx47[_0x50fc[99]](_0x50fc[105],function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)}});_0x4f0cx47[_0x50fc[99]](_0x50fc[106],function(_0x4f0cx37,_0x4f0cx49){if(_0x4f0cx37){console[_0x50fc[24]](_0x4f0cx37)};console[_0x50fc[24]](_0x50fc[107])})}});sql[_0x50fc[67]](_0x50fc[108],(_0x4f0cx37)=>{console[_0x50fc[24]](_0x50fc[109],_0x4f0cx37)})}